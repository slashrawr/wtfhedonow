<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <title>wtfhedonow?!</title>
    <style>      

        body {
            font-family: "Verdana", sans-serif;
            text-align: center;
            margin: 20px;
        }

        h1 {
            margin-bottom: 10px;
        }

        p {
            font-size: 16px;
        }

        table {
            width: 80%;
            margin-top: 20px;
            margin-left: auto;
            margin-right: auto;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #f4f4f4;
            text-align: center;
        }

        a {
            color: #333;
            text-decoration: none;
        }

        a:hover {
            color: #333;
            text-decoration: none;
        }

        tbody tr {
            transition: transform .2s;
        }

        tbody tr:hover {
            cursor:pointer; 
            transform: scale(1.03);
            background:#aaa;
            color:#000;
        }

        .flex-container {
            display: flex;
            flex-direction: row;
            margin-left: auto;
            margin-right: auto;
            width: 80%;
        }

        .flex-article-container {
            width:80%;
            display: flex;
            flex-direction: row;
            margin-left: auto;
            margin-right: auto;
            align-items: stretch;
            flex-wrap: wrap;
            justify-content: space-evenly;
        }

        .card {
            width: 400px;
            display: flex;
            flex-direction: column;
            background-color: #eee;
            color: #333;
            border-radius: 1.0rem;
            margin: 0.2rem;
            padding: 1rem 0 1 0;
            box-shadow: 0 -0.4rem 0.8rem rgba(0 0 0 / 0.15);
        }

        .card:hover {
            cursor:pointer; 
            transform: scale(1.2);
            background-color: #888;
        }

        .card-content {
            margin-bottom: 1rem;
        }

        .card-date {
            padding: 0.3rem 0;
            font-weight: bold;
        }

        .card-info {

        }

        .card-severity {

        }

        .card-tags {
            padding: 2em 0;
        }

        .card-tag {
            background: rgb(94, 189, 240);
            border-radius: 15px;
            margin: 0.3rem 0 0 0;
            padding: 0.2rem 0.8rem;
            font-size: 0.8rem;
            color: #333;
        }
    </style>
    <script>
        // Fetch and populate table with JSON data
        async function loadTableData() {
            try {
                const fetchResponse = await fetch('https://rawr-generic-bucket.s3.us-east-1.amazonaws.com/wtfhedonow/data.json',
                    {
                        method: 'GET',
                        mode: 'cors',
                        headers: {
                            'Origin': 'https://main.d392p52lqd4u4c.amplifyapp.com',
                            'Content-Type': 'application/json'
                        }
                    }
                );
                
                const data = await fetchResponse.json();

                const articleContainer = document.getElementById("article-container");

                const tableBody = document.querySelector("#data-table tbody");
                tableBody.innerHTML = ""; // Clear existing content

                data.forEach(entry => {
                    // Extracting date from the first URL
                    const url = entry.urls[0];
                    const urlParts = url.match(/\d{4}\/\d{2}\/\d{2}/);
                    const date = urlParts ? urlParts[0].replace(/\//g, '-') : "N/A";

                    const severity = (entry.severity == "LOW")  ? "ðŸ”¥" : (entry.severity == "MED") ? "ðŸ”¥ðŸ”¥" : (entry.severity == "HIGH") ? "ðŸ”¥ðŸ”¥ðŸ”¥" : "";

                    if (entry.featured) 
                    {
                        const card = document.createElement("div");
                        card.classList.add("card");
                        card.innerHTML = `
                            <div class="card-content">
                                <div class="card-date">${date}</div>
                                <div class="card-info">
                                    <a href="${url}" target="_blank">${entry.summary}</a>
                                </div>
                                <div class="card-severity">
                                    <div class="severity-indicator" title="Severity: ${entry.severity.toUpperCase()}">${severity}</div>
                                </div>
                                <div class="card-tags">
                                    ${entry.tags.map(tag => `
                                        <span class="card-tag">#${tag}</span>
                                    `).join('')}
                                </div>
                                <div class="card-sources">
                                    ${entry.urls.forEach(url => `<a href="${url}" target="_blank">Source</a>`).join(' | ')}
                                </div>
                            </div>    
                            `;
                                
                        articleContainer.appendChild(card);
                    }

                    const row = document.createElement("tr");

                    row.innerHTML = `
                        <td><a href="${url}" target="_blank">${date}</a></td>
                        <td><a href="${url}" target="_blank">${entry.summary}</a></td>
                        <td>${entry.urls.forEach(url => `<a href="${url}" target="_blank">Source</a>`).join(' | ')}</td>
                    `;

                    tableBody.appendChild(row);
                });
            } catch (error) {
                console.error("Error loading data:", error);
            }
        }

        // Load data on page load
        window.onload = loadTableData;
    </script>
</head>
<body>
    <h1>wtfhedonow?!</h1>
    <p>A summary of recent actions and decisions made by the Trump/Musk administration.</p>

    <div id="article-container" class="flex-article-container">
        <!-- Data will be inserted here dynamically -->
    </div>

    <table id="data-table">
        <thead>
            <tr>
                <th style="width: 10%; text-align: center;"">Date</th>
                <th style="width: auto;">Summary</th>
                <th style="width: 10%; text-align: center;">Source</th>
            </tr>
        </thead>
        <tbody>
            <!-- Data will be inserted here dynamically -->
        </tbody>
    </table>
    
    <div class="flex-container">
        <div>
            <h2>Model</h2>
            us.anthropic.claude-3-5-haiku-20241022-v1:0
        </div>
        <div">
            <h2>Prompt</h2>
            You are an unbiased political analyst. You carefully analyse news articles every day as part of chronicling President Donald J. Trump's 2nd term. Below is a collection of articles from today. Summarise each article into a single sentence highlighting actions and activities by Donald J. Trump, Elon Musk and his administration that are ethically questionable, potentially illegal, undermine American institutions and American constitution or would otherwise be considered "dumb" by any sensible individual. It is vital you are as objective as possible and do not embellish or read into details that are not there. Only include articles that are directly related to President Trump, Elon Musk or his administration. If there is nothing improper, then ignore the article. Where articles describe the same thing, combine them into a single summary. Phrase summaries in the third person. Cite the respective article URL or set of URLs if articles are combined along with the summary. Provide an assessment of severity (LOW, MED, HIGH) of the implications of the actions or activities reported in the articles. Identify a list of key "tags" for each entry. Leave out the preamble and postamble. Return the summaries in JSON format with the following schema: [ { "summary" : &lt;summary&gt;, "urls" : [&lt;urls&gt;], "severity" : &lt;severity&gt;, "tags" : [&lt;tags&gt;] } ]
        </div>
        <div>
            <h2>Repo</h2>
            <a href="https://github.com/slashrawr/wtfhedonow"><i class="fa fa-github" style="font-size:36px"></i></a>
        </div>
      </div>
</body>
</html>
